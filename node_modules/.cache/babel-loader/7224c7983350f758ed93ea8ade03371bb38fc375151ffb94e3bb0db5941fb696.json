{"ast":null,"code":"import _defineProperty from\"/home/moringa/Documents/Moringa/Development/code/phase3/PROJECT/the-booze-bodega/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/moringa/Documents/Moringa/Development/code/phase3/PROJECT/the-booze-bodega/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/moringa/Documents/Moringa/Development/code/phase3/PROJECT/the-booze-bodega/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AddReview(_ref){var liquors=_ref.liquors,setReviews=_ref.setReviews,reviewsApi=_ref.reviewsApi;var _useState=useState({rating:null,comment:\"\",user_id:null,liquor_id:null}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var handleChange=function handleChange(e){return setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();var updatedForm={rating:form.rating,comment:form.text,user_id:Math.floor(20*Math.random()),liquor_id:liquors.filter(function(liquor){return liquor.title.toLowerCase()===form.liquorname.toLowerCase();})[0].id};fetch(reviewsApi,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(updatedForm)}).then(function(res){return res.json();}).then(function(data){return setReviews(data);}).catch(console.log);setForm({rating:null,comment:\"\",user_id:null,liquor_id:null});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"first\",children:\"New Reviews\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"legend\",{children:\" Review \"}),/*#__PURE__*/_jsxs(\"label\",{style:{color:'pink'},children:[\" Exact Beverage name as indicated? \\xA0\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"liquorname\",required:true,onChange:function onChange(e){return handleChange(e);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"your thoughts on this liquor...\",name:\"text\",required:true}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{style:{color:'pink'},children:[\" On a scale of 1-5, how do you rate this product? \\xA0\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"rating\",max:\"5\",min:\"0\",required:true,onChange:function onChange(e){return handleChange(e);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"submit\",name:\"submit\",onSubmit:function onSubmit(e){return handleSubmit(e);}})]})]});}export default AddReview;","map":{"version":3,"names":["React","useState","AddReview","liquors","setReviews","reviewsApi","rating","comment","user_id","liquor_id","form","setForm","handleChange","e","target","name","value","handleSubmit","preventDefault","updatedForm","text","Math","floor","random","filter","liquor","title","toLowerCase","liquorname","id","fetch","method","headers","body","JSON","stringify","then","res","json","data","catch","console","log","color"],"sources":["/home/moringa/Documents/Moringa/Development/code/phase3/PROJECT/the-booze-bodega/src/AddReview.js"],"sourcesContent":["import React, { useState } from 'react'\n\nfunction AddReview( {liquors, setReviews, reviewsApi} ) {\n\n    const [form, setForm] = useState({\n        rating: null,\n        comment: \"\",\n        user_id: null,\n        liquor_id: null\n    })\n\n    const handleChange = e => setForm({ ...form, [e.target.name]: e.target.value})\n\n    const handleSubmit = e => {\n\n        e.preventDefault()\n\n        const updatedForm = {\n          rating: form.rating,\n          comment: form.text,\n          user_id: Math.floor(20*Math.random()),\n          liquor_id: liquors.filter(liquor => liquor.title.toLowerCase() === form.liquorname.toLowerCase())[0].id\n        }\n\n        fetch(reviewsApi, {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\"},\n            body: JSON.stringify(updatedForm)\n          })\n          .then(res => res.json()).then(data => setReviews(data))\n          .catch(console.log)\n\n        setForm({\n            rating: null,\n            comment: \"\",\n            user_id: null,\n            liquor_id: null\n        })\n    }\n      \n  return (\n    <div>\n        <p className='first'>New Reviews</p>\n        <form>\n            <legend> Review </legend>\n            <label style={{color:'pink'}}> Exact Beverage name as indicated? &nbsp;\n                <input \n                    type=\"text\" \n                    name='liquorname' \n                    required\n                    onChange={e => handleChange(e)}/>\n            </label><br /><br /><br />\n            <textarea placeholder='your thoughts on this liquor...' name='text' required></textarea> <br />\n            <label style={{color:'pink'}}> On a scale of 1-5, how do you rate this product? &nbsp;\n                <input \n                    type=\"number\" \n                    name='rating' \n                    max=\"5\" \n                    min='0' \n                    required \n                    onChange={e => handleChange(e)}/>\n            </label><br /><br /><br />\n            <input type='submit' value='submit' name='submit' onSubmit={e => handleSubmit(e)}/>\n        </form>\n    </div>\n  )\n}\n\nexport default AddReview"],"mappings":"mfAAA,MAAOA,MAAK,EAAIC,QAAQ,KAAQ,OAAO,yFAEvC,QAASC,UAAS,MAAsC,IAAnCC,QAAO,MAAPA,OAAO,CAAEC,UAAU,MAAVA,UAAU,CAAEC,UAAU,MAAVA,UAAU,CAEhD,cAAwBJ,QAAQ,CAAC,CAC7BK,MAAM,CAAE,IAAI,CACZC,OAAO,CAAE,EAAE,CACXC,OAAO,CAAE,IAAI,CACbC,SAAS,CAAE,IACf,CAAC,CAAC,wCALKC,IAAI,eAAEC,OAAO,eAOpB,GAAMC,aAAY,CAAG,QAAfA,aAAY,CAAGC,CAAC,QAAIF,QAAO,gCAAMD,IAAI,wBAAGG,CAAC,CAACC,MAAM,CAACC,IAAI,CAAGF,CAAC,CAACC,MAAM,CAACE,KAAK,GAAE,GAE9E,GAAMC,aAAY,CAAG,QAAfA,aAAY,CAAGJ,CAAC,CAAI,CAEtBA,CAAC,CAACK,cAAc,EAAE,CAElB,GAAMC,YAAW,CAAG,CAClBb,MAAM,CAAEI,IAAI,CAACJ,MAAM,CACnBC,OAAO,CAAEG,IAAI,CAACU,IAAI,CAClBZ,OAAO,CAAEa,IAAI,CAACC,KAAK,CAAC,EAAE,CAACD,IAAI,CAACE,MAAM,EAAE,CAAC,CACrCd,SAAS,CAAEN,OAAO,CAACqB,MAAM,CAAC,SAAAC,MAAM,QAAIA,OAAM,CAACC,KAAK,CAACC,WAAW,EAAE,GAAKjB,IAAI,CAACkB,UAAU,CAACD,WAAW,EAAE,GAAC,CAAC,CAAC,CAAC,CAACE,EACvG,CAAC,CAEDC,KAAK,CAACzB,UAAU,CAAE,CACd0B,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAkB,CAAC,CAC9CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAChB,WAAW,CAClC,CAAC,CAAC,CACDiB,IAAI,CAAC,SAAAC,GAAG,QAAIA,IAAG,CAACC,IAAI,EAAE,GAAC,CAACF,IAAI,CAAC,SAAAG,IAAI,QAAInC,WAAU,CAACmC,IAAI,CAAC,GAAC,CACtDC,KAAK,CAACC,OAAO,CAACC,GAAG,CAAC,CAErB/B,OAAO,CAAC,CACJL,MAAM,CAAE,IAAI,CACZC,OAAO,CAAE,EAAE,CACXC,OAAO,CAAE,IAAI,CACbC,SAAS,CAAE,IACf,CAAC,CAAC,CACN,CAAC,CAEH,mBACE,oCACI,UAAG,SAAS,CAAC,OAAO,yBAAgB,cACpC,qCACI,oCAAyB,cACzB,eAAO,KAAK,CAAE,CAACkC,KAAK,CAAC,MAAM,CAAE,kEACzB,cACI,IAAI,CAAC,MAAM,CACX,IAAI,CAAC,YAAY,CACjB,QAAQ,MACR,QAAQ,CAAE,kBAAA9B,CAAC,QAAID,aAAY,CAACC,CAAC,CAAC,EAAC,EAAE,GACjC,2BAAM,2BAAM,2BAAM,cAC1B,iBAAU,WAAW,CAAC,iCAAiC,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,OAAY,kBAAC,aAAM,cAC/F,eAAO,KAAK,CAAE,CAAC8B,KAAK,CAAC,MAAM,CAAE,iFACzB,cACI,IAAI,CAAC,QAAQ,CACb,IAAI,CAAC,QAAQ,CACb,GAAG,CAAC,GAAG,CACP,GAAG,CAAC,GAAG,CACP,QAAQ,MACR,QAAQ,CAAE,kBAAA9B,CAAC,QAAID,aAAY,CAACC,CAAC,CAAC,EAAC,EAAE,GACjC,2BAAM,2BAAM,2BAAM,cAC1B,cAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAE,kBAAAA,CAAC,QAAII,aAAY,CAACJ,CAAC,CAAC,EAAC,EAAE,GAChF,GACL,CAEV,CAEA,cAAeX,UAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}