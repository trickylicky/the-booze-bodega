{"ast":null,"code":"import _defineProperty from\"/home/moringa/Documents/Moringa/Development/code/phase3/PROJECT/the-booze-bodega/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/moringa/Documents/Moringa/Development/code/phase3/PROJECT/the-booze-bodega/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/moringa/Documents/Moringa/Development/code/phase3/PROJECT/the-booze-bodega/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from'react';import Popup from'reactjs-popup';import{AppContext}from'../services/app-context';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LiquorCategory(_ref){var props=_ref.props;var _useState=useState({name:\"\",comment:\"\"}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useContext=useContext(AppContext),reviews=_useContext.reviews,addToCart=_useContext.addToCart,name=_useContext.name,setReviews=_useContext.setReviews;var handleChange=function handleChange(e){return setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));};var handleSubmit=function handleSubmit(e,id){e.preventDefault();var updatedForm={name:name,review_data:{rating:Math.ceil(Math.random()*5),// Will be modified to return average rating of all users.\ncomment:form.comment,liquor_id:id}};fetch(\"https://fierce-gorge-06316.herokuapp.com/reviews\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(updatedForm)});setReviews(reviews);setForm({});};return/*#__PURE__*/_jsx(\"div\",{className:\"component liquors\",children:props.map(function(obj){return/*#__PURE__*/_jsxs(\"main\",{id:\"liquor\",children:[/*#__PURE__*/_jsx(\"img\",{src:obj.image_url,alt:obj.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"liquor_details\",children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:obj.title}),\" \"]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"popup_buttons\",children:[/*#__PURE__*/_jsxs(Popup,{trigger:/*#__PURE__*/_jsx(\"button\",{className:\"popup\",children:\" more details\"}),position:\"center center\",children:[/*#__PURE__*/_jsx(\"img\",{src:obj.image_url,alt:obj.title}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:obj.title}),\"  \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),obj.description,\"   \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\"Price : \\xA0 \",/*#__PURE__*/_jsxs(\"span\",{style:{color:'red',fontSize:'large'},children:[\" Ksh. \",obj.price]})]}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Users Reviews\"}),\" \",/*#__PURE__*/_jsx(\"hr\",{}),reviews.filter(function(review){return review.liquor_id===obj.id&&review.length>=1;}).map(function(review){return/*#__PURE__*/_jsx(\"li\",{children:review.comment},review.id);})]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"button\",{className:\"click\",onClick:function onClick(e){alert(\"Item added to cart\");addToCart(obj,'increase');},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-cart-shopping\"})}),/*#__PURE__*/_jsxs(Popup,{trigger:/*#__PURE__*/_jsxs(\"button\",{className:\"popup\",children:[\" \",/*#__PURE__*/_jsx(\"i\",{className:\"fa-sharp fa-solid fa-feather-pointed\"})]}),position:\"left bottom\",children:[\"  \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return handleSubmit(e,obj.id);},children:[/*#__PURE__*/_jsxs(\"label\",{for:\"reviews\",children:[\" Leave a review(s) \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{name:\"comment\",onChange:function onChange(e){return handleChange(e);},placeholder:\"Share your thoughts on this liquor...\",style:{height:'100px',width:\"200px\"}})]}),\"  \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"post\"})]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{})]})]})]},obj.id);})});}export default LiquorCategory;","map":{"version":3,"names":["React","useContext","useState","Popup","AppContext","LiquorCategory","props","name","comment","form","setForm","reviews","addToCart","setReviews","handleChange","e","target","value","handleSubmit","id","preventDefault","updatedForm","review_data","rating","Math","ceil","random","liquor_id","fetch","method","headers","body","JSON","stringify","map","obj","image_url","title","description","color","fontSize","price","filter","review","length","alert","height","width"],"sources":["/home/moringa/Documents/Moringa/Development/code/phase3/PROJECT/the-booze-bodega/src/components/LiquorCategory.js"],"sourcesContent":["import React, { useContext, useState } from 'react'\nimport Popup from 'reactjs-popup'\nimport { AppContext } from '../services/app-context'\n\nfunction LiquorCategory( {props} ) {\n  const [form, setForm] = useState({\n    name: \"\",\n    comment: \"\"\n  })\n\n  const { reviews, addToCart, name, setReviews } = useContext(AppContext);\n\n  const handleChange = e => setForm({...form, [e.target.name] : e.target.value})\n\n  const handleSubmit = (e, id) => {\n\n    e.preventDefault()\n\n    const updatedForm = {\n      name: name,\n      review_data: {\n        rating: Math.ceil(Math.random()*5), // Will be modified to return average rating of all users.\n        comment: form.comment,\n        liquor_id: id\n      },\n    }\n\n    fetch(\"https://fierce-gorge-06316.herokuapp.com/reviews\", {\n      method: \"POST\",\n      headers : {\"Content-Type\": \"application/json\"},\n      body : JSON.stringify(updatedForm)\n    })\n\n    setReviews(reviews)\n    setForm({})\n  }\n\n  return (\n    <div className='component liquors'>\n      {\n        props.map(obj => {\n\n          return(\n  \n            <main id='liquor' key={obj.id}>\n              <img src={obj.image_url} alt={obj.title} />\n              <p className='liquor_details'> <b>{obj.title}</b> </p> <br />\n              <div className='popup_buttons'>\n\n                <Popup \n                  trigger={<button className='popup'> more details</button>} \n                  position=\"center center\"\n                >\n                  <img src={obj.image_url} alt={obj.title} />\n                  <p> \n                    <b>{obj.title}</b>  <br /><br />\n                    {obj.description}   <br /><br />\n                    Price : &nbsp; <span style={{color:'red', fontSize: 'large'}}> Ksh. {obj.price}</span> \n                  </p>\n                  <ul>\n                    <h3>Users Reviews</h3> <hr />\n                    {\n                      reviews.filter(review => review.liquor_id === obj.id && review.length >= 1)\n                      .map(review =>  <li key={review.id}>{review.comment}</li>\n                      )\n                    }\n                  </ul> <br /> <br />\n                </Popup>\n                <button \n                  className='click' \n                  onClick={ e => {\n                    alert (\"Item added to cart\")\n                    addToCart(obj, 'increase')}\n                  }\n                >\n                  <i className=\"fa-solid fa-cart-shopping\"></i>\n                </button> \n\n                <Popup \n                  trigger={<button className='popup'> <i className=\"fa-sharp fa-solid fa-feather-pointed\"></i>\n                  </button>} \n                  position=\"left bottom\"\n                  >  <br />\n                  <form onSubmit={e => handleSubmit(e, obj.id)}>\n                    <label for=\"reviews\"> Leave a review(s) <br /> <br />\n                      <textarea \n                        name=\"comment\" \n                        onChange={e => handleChange(e)} \n                        placeholder='Share your thoughts on this liquor...' \n                        style={{height: '100px', width: \"200px\"}}\n                      >\n                      </textarea>\n                    </label>  <br /> <br />\n                    <input type='submit' value='post' />\n                  </form> <br /> <br />\n                </Popup>\n              </div>\n            </main>\n          )}\n        ) \n      }\n    </div>\n  )\n}\n\nexport default LiquorCategory"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}