{"ast":null,"code":"import _defineProperty from\"/home/moringa/Documents/Moringa/Development/code/phase3/PROJECT/the-booze-bodega/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/moringa/Documents/Moringa/Development/code/phase3/PROJECT/the-booze-bodega/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/moringa/Documents/Moringa/Development/code/phase3/PROJECT/the-booze-bodega/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from'react';import Popup from'reactjs-popup';import{AppContext}from'../services/app-context';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Cart(){var _useContext=useContext(AppContext),cart=_useContext.cart,addToCart=_useContext.addToCart,reviews=_useContext.reviews,handleDelete=_useContext.handleDelete,name=_useContext.name,setReviews=_useContext.setReviews;var _useState=useState({name:'',review_data:{rating:'',comment:'',liquor_id:''}}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var handleChange=function handleChange(e){return setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));};var handleSubmit=function handleSubmit(e,id){e.preventDefault();var updatedForm={name:name,review_data:{rating:Math.ceil(Math.random()*5),comment:form.comment,liquor_id:id}};fetch(\"https://fierce-gorge-06316.herokuapp.com/reviews\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(updatedForm)});setReviews(reviews);setForm({name:'',review_data:{rating:'',comment:'',liquor_id:''}});};return/*#__PURE__*/_jsxs(\"div\",{className:\"component cart\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"first\",children:\" Your saved items.\"}),cart.map(function(obj){return/*#__PURE__*/_jsxs(\"main\",{id:\"liquor\",children:[/*#__PURE__*/_jsx(\"img\",{src:obj.image_url,alt:obj.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"liquor_details\",children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:obj.title}),\" \"]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"popup_buttons\",children:[/*#__PURE__*/_jsxs(Popup,{trigger:/*#__PURE__*/_jsx(\"button\",{className:\"popup\",children:\" more details\"}),position:\"center center\",children:[/*#__PURE__*/_jsx(\"img\",{src:obj.image_url,alt:obj.title}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:obj.title}),\"  \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),obj.description,\"   \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\"Price : \\xA0 \",/*#__PURE__*/_jsxs(\"span\",{style:{color:'red',fontSize:'large'},children:[\" Ksh. \",obj.price]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Item has been added \",obj.quantity,\" times.\"]}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Users Reviews\"}),\" \",/*#__PURE__*/_jsx(\"hr\",{}),reviews.filter(function(review){return review.liquor_id===obj.id;}).map(function(review){return review.length===0?/*#__PURE__*/_jsx(\"h4\",{children:\"There are no reviews yet.\"}):/*#__PURE__*/_jsxs(\"li\",{children:[review.comment,\"  \\u2003\",/*#__PURE__*/_jsx(\"button\",{type:\"click\",id:review.id,onClick:function onClick(e){return handleDelete(e);},style:{color:\"black\",background:\"red\"},children:\"X\"})]},review.id);})]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"button\",{className:\"click\",onClick:function onClick(e){alert(\"Item removed from cart\");addToCart(obj,'decrease');},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-cart-shopping\"})}),/*#__PURE__*/_jsxs(Popup,{trigger:/*#__PURE__*/_jsxs(\"button\",{className:\"popup\",children:[\" \",/*#__PURE__*/_jsx(\"i\",{className:\"fa-sharp fa-solid fa-feather-pointed\"})]}),position:\"left bottom\",children:[\"  \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return handleSubmit(e,obj.id);},target:\"\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"reviews\",children:[\" Leave a review(s) \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{name:\"comment\",onChange:function onChange(e){return handleChange(e);},placeholder:\"Share your thoughts on this liquor...\",style:{height:'100px',width:\"200px\"}})]}),\"  \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"add\"})]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{})]})]})]},obj.id);})]});}export default Cart;","map":{"version":3,"names":["React","useContext","useState","Popup","AppContext","Cart","cart","addToCart","reviews","handleDelete","name","setReviews","review_data","rating","comment","liquor_id","form","setForm","handleChange","e","target","value","handleSubmit","id","preventDefault","updatedForm","Math","ceil","random","fetch","method","headers","body","JSON","stringify","map","obj","image_url","title","description","color","fontSize","price","quantity","filter","review","length","background","alert","height","width"],"sources":["/home/moringa/Documents/Moringa/Development/code/phase3/PROJECT/the-booze-bodega/src/components/Cart.js"],"sourcesContent":["import React, { useContext, useState } from 'react'\nimport Popup from 'reactjs-popup'\nimport { AppContext } from '../services/app-context'\n\nfunction Cart() {\n  const { cart, addToCart, reviews, handleDelete, name, setReviews } = useContext(AppContext)\n\n  const [form, setForm] = useState({\n    name: '',\n    review_data: {\n      rating: '',\n      comment: '',\n      liquor_id: ''\n    }\n  })\n\n  const handleChange = e => setForm({...form, [e.target.name] : e.target.value})\n\nconst handleSubmit = (e, id) => {\n\n  e.preventDefault()\n\n  const updatedForm = {\n    name: name,\n    review_data: {\n      rating: Math.ceil(Math.random()*5),\n      comment: form.comment,\n      liquor_id: id\n    },\n  }\n\n  fetch(\"https://fierce-gorge-06316.herokuapp.com/reviews\", {\n    method: \"POST\",\n    headers : {\"Content-Type\": \"application/json\"},\n    body : JSON.stringify(updatedForm)\n  })\n\n  setReviews(reviews)\n  setForm({\n    name: '',\n    review_data: {\n      rating: '',\n      comment: '',\n      liquor_id: ''\n    }\n  })\n}\n\n  return (\n    <div className='component cart'>\n      <p className='first'> Your saved items.</p>\n      {cart.map(obj => {\n        return(\n          <main id='liquor' key={obj.id}>\n            <img src={obj.image_url} alt={obj.title} />\n            <p className='liquor_details'> <b>{obj.title}</b> </p> <br />\n            <div className='popup_buttons'>\n\n              <Popup\n                trigger={<button className='popup'> more details</button>} \n                position=\"center center\"\n              >\n                <img src={obj.image_url} alt={obj.title} />\n                <p> \n                  <b>{obj.title}</b>  <br /><br />\n                  {obj.description}   <br /><br />\n                  Price : &nbsp; <span style={{color:'red', fontSize: 'large'}}> Ksh. {obj.price}</span> <br /> <br />\n                  Item has been added {obj.quantity} times.\n                </p>\n                <ul>\n                  <h3>Users Reviews</h3> <hr />\n                  {\n                    reviews.filter(review => review.liquor_id === obj.id)\n                    .map(review =>  review.length === 0 ? <h4>There are no reviews yet.</h4> : \n                    <li key={review.id}>\n                      {review.comment}  &emsp;\n                      <button type='click' id={review.id} onClick={e => handleDelete(e)} style={{color:\"black\", background:\"red\"}}>\n                        X\n                      </button>\n                    </li>\n                    )\n                  }\n                </ul> <br /> <br />\n              </Popup>\n              <button \n                className='click' \n                onClick={ e => {\n                  alert (\"Item removed from cart\")\n                  addToCart(obj, 'decrease')}\n                }\n              >\n                <i className=\"fa-solid fa-cart-shopping\"></i>\n              </button> \n\n              <Popup \n                trigger={<button className='popup'> <i className=\"fa-sharp fa-solid fa-feather-pointed\"></i>\n                </button>} \n                position=\"left bottom\"\n                >  <br />\n                <form onSubmit={e => handleSubmit(e, obj.id)} target=\"\">\n                  <label for=\"reviews\"> Leave a review(s) <br /> <br />\n                    <textarea \n                      name=\"comment\" \n                      onChange={e => handleChange(e)} \n                      placeholder='Share your thoughts on this liquor...' \n                      style={{height: '100px', width: \"200px\"}}\n                    >\n                    </textarea>\n                  </label>  <br /> <br />\n                  <input type='submit' value='add' />\n                </form> <br /> <br />\n              </Popup>\n            </div>\n          </main>\n        )\n      })}\n    \n      \n    </div>\n  )\n}\n\nexport default Cart"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}